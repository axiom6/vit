var Chord;import*as d3 from"../../pub/lib/d3/d3.5.9.0.esm.js";Chord=class{constructor(){this.ready=this.ready.bind(this)}ready(){return this.matrix=[[11975,5871,8916,2868],[1951,10048,2060,6171],[8010,16145,8090,8045],[1013,990,940,6907]],this.range=["#000000","#FFDD89","#957244","#F26223"],this.svg=d3.select("svg"),this.width=this.svg.attr("width"),this.height=this.svg.attr("height"),this.outer=.5*Math.min(this.width,this.height)-40,this.inner=this.outer-30,this.format=d3.formatPrefix(",.0",1e3),this.chord=d3.chord().padAngle(.05).sortSubgroups(this.d3.descending),this.arc=d3.arc().innerRadius(this.inner).outerRadius(this.outer),this.ribbon=d3.ribbon().radius(this.inner),this.color=d3.scaleOrdinal().domain(d3.range(4)).range(this.range),this.g=this.svg.append("g").attr("transform","translate("+this.width/2+","+this.height/2+")").datum(this.chord(this.matrix)),this.group=this.g.append("g").attr("class","groups").selectAll("g").data(t=>t.groups).enter().append("g"),this.group.append("path").style("fill",t=>this.color(t.index)).style("stroke",t=>d3.rgb(this.color(t.index)).darker()).attr("d",this.arc),this.groupTick=this.group.selectAll(".group-tick").data(t=>this.groupTicks(t,1e3)).enter().append("g").attr("class","group-tick").attr("transform",t=>"rotate("+(180*t.angle/Math.PI-90)+") translate("+this.outer+",0)"),this.groupTick.append("line").attr("x2",6),this.groupTick.filter((function(t){return t.value%5e3==0})).append("text").attr("x",8).attr("dy",".35em").attr("transform",(function(t){return t.angle>Math.PI?"rotate(180) translate(-16)":null})).style("text-anchor",(function(t){return t.angle>Math.PI?"end":null})).text(t=>this.format(t.value)),this.g.append("g").attr("class","ribbons").selectAll("path").data((function(t){return t})).enter().append("path").attr("d",this.ribbon).style("fill",t=>this.color(t.target.index)).style("stroke",t=>d3.rgb(this.color(t.target.index)).darker())}groupTicks(t,r){var e;return e=(t.endAngle-t.startAngle)/t.value,d3.range(0,t.value,r).map((function(r){return{value:r,angle:r*e+t.startAngle}}))}};export default Chord;